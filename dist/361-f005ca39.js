"use strict";(self.webpackJsonpCheckout=self.webpackJsonpCheckout||[]).push([[361],{53537:(e,t,n)=>{n.d(t,{Z:()=>z});var a=n(86940),o=n(55375),r=n(91074),l=n(67627),i=n(70140),s=n(43276),c=n(47086),d=n(78379),u=n(70764),m=n(59826),p={address1:"addressLine1",address2:"addressLine2",postalCode:"postCode",stateOrProvince:"province",stateOrProvinceCode:"provinceCode"};function h(e){return"".concat(p[e]||e)}function f(e){return"".concat(h(e),"Input")}const g=function(){function e(e){var t=e.address_components,n=e.name;this._name=n,this._address=t}return e.prototype.getState=function(){return this._get("administrative_area_level_1","short_name")},e.prototype.getStreet=function(){return this._name},e.prototype.getStreet2=function(){return"NZ"===this.getCountry()?this._get("sublocality","short_name"):this._get("subpremise","short_name")},e.prototype.getCity=function(){return this._get("postal_town","long_name")||this._get("locality","long_name")||this._get("neighborhood","short_name")},e.prototype.getCountry=function(){return this._get("country","short_name")},e.prototype.getPostCode=function(){return this._get("postal_code","short_name")},e.prototype._get=function(e,t){var n=this._address&&this._address.find((function(t){return-1!==t.types.indexOf(e)}));return n?n[t]:""},e}();const v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,a.ZT)(t,e),t.prototype.getState=function(){return""},t.prototype.getStreet2=function(){return this._get("locality","long_name")},t.prototype.getPostCode=function(){return""},t}(g);const C=function(){function e(){}return e.create=function(e){var t=new g(e);return"GB"===t.getCountry()?new v(e):t},e}();function b(e,t){if(void 0===t&&(t=[]),!e||!e.address_components)return{};var n=C.create(e),o=n.getState(),r=n.getCountry(),l=t&&t.find((function(e){return r===e.code})),i=n.getStreet2();return(0,a.pi)({address2:i,city:n.getCity(),countryCode:r,postalCode:n.getPostCode()},o?function(e,t){void 0===t&&(t=[]);var n=t.find((function(t){var n=t.code,a=t.name;return n===e||a===e}));if(!n)return{stateOrProvince:t.length?"":e,stateOrProvinceCode:""};return{stateOrProvince:n.name,stateOrProvinceCode:n.code}}(o,l&&l.subdivisions):{})}var y=n(696),E=n.n(y),_=n(64553),Z=n(92963),k=n(6904);const S=function(e){var t=e.children;return l.createElement("div",{className:"popover"},t)};function w(e,t){var n=["popoverList-item"];return e===t&&n.push("is-active"),n.join(" ")}const P=(0,l.memo)((function(e){var t=e.highlightedIndex,n=void 0===t?-1:t,o=e.testId,r=e.getItemProps,i=void 0===r?function(e){return e}:r,s=e.menuProps,c=void 0===s?{}:s,d=e.items;return d.length?l.createElement("ul",(0,a.pi)({className:"popoverList","data-test":o},c),d.map((function(e,t){return l.createElement("li",(0,a.pi)({className:w(n,t),"data-test":o&&"".concat(o,"-item")},i({key:e.id,index:t,item:e}),{key:t}),e.content)}))):null}));const F=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateReducer=function(e,n){var o=t.props.onChange;switch(n.type){case k.ZP.stateChangeTypes.blurInput:case k.ZP.stateChangeTypes.blurButton:case k.ZP.stateChangeTypes.mouseUp:case k.ZP.stateChangeTypes.touchEnd:return(0,a.pi)((0,a.pi)({},n),{inputValue:e.inputValue});case k.ZP.stateChangeTypes.changeInput:return n.inputValue!==e.inputValue&&o&&o(n.inputValue||"",e.isOpen),n;case k.ZP.stateChangeTypes.keyDownEnter:default:return n}},t.handleStateChange=function(e){var n=e.isOpen,a=e.inputValue,o=t.props.onToggleOpen,l=void 0===o?r.noop:o;void 0!==n&&l({isOpen:n,inputValue:a||""})},t}return(0,a.ZT)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.inputProps,o=t.initialValue,i=t.initialHighlightedIndex,s=t.items,c=t.children,d=t.onSelect,u=t.listTestId;return l.createElement(k.ZP,{defaultHighlightedIndex:0,initialHighlightedIndex:i,initialInputValue:o,itemToString:this.itemToString,labelId:n&&n["aria-labelledby"]?n["aria-labelledby"]:null,onChange:d,onStateChange:this.handleStateChange,stateReducer:this.stateReducer},(function(t){var o=t.isOpen,i=t.getInputProps,d=t.getMenuProps,m=t.getItemProps,p=t.highlightedIndex,h=(0,a.pi)((0,a.pi)({},i()),n);return delete h.labelText,l.createElement("div",null,l.createElement("input",(0,a.pi)({},h)),n&&(0,r.includes)(n.className,"floating")&&l.createElement(_.Z,{htmlFor:n.id,id:n["aria-labelledby"],useFloatingLabel:!0},n.labelText),o&&!!s.length&&l.createElement(S,null,l.createElement(P,{getItemProps:m,highlightedIndex:(0,r.isNumber)(p)?p:-1,items:s.map((function(t){return e.toPopoverItem(t)})),menuProps:d(),testId:u}),c))}))},t.prototype.toPopoverItem=function(e){return(0,a.pi)((0,a.pi)({},e),{content:this.highlightItem(e)})},t.prototype.highlightItem=function(e){if(!e.highlightedSlices||!e.highlightedSlices.length)return e.label;var t=0,n=0;return e.highlightedSlices.reduce((function(a,o,r){var i=e.label,s=o.offset,c=o.length,d=s-t;return d&&(a.push(l.createElement(l.Fragment,{key:n},i.substr(t,d))),n+=1),t=s+c,a.push(l.createElement("strong",{key:n},i.substr(s,c))),n+=1,r===(e.highlightedSlices||[]).length-1&&(a.push(l.createElement(l.Fragment,{key:n},i.substr(t))),n+=1),a}),[])},t.prototype.itemToString=function(e){return e&&e.value||""},t}(l.PureComponent);var N=n(33327);const I=function(){function e(){this._scriptLoader=(0,N.getScriptLoader)()}return e.prototype.loadMapsSdk=function(e){var t=this;return this._googleAutoComplete||(this._googleAutoComplete=new Promise((function(n,a){var o="initAutoComplete",r=["language=en","key=".concat(e),"libraries=places","callback=".concat(o)].join("&");window[o]=function(){(function(e){var t=e;return Boolean(t.google&&t.google.maps&&t.google.maps.places)})(window)&&n(window.google.maps),a()},t._scriptLoader.loadScript("//maps.googleapis.com/maps/api/js?".concat(r)).catch((function(e){throw t._googleAutoComplete=void 0,e}))}))),this._googleAutoComplete},e}();var x;const A=function(){function e(e,t){void 0===t&&(x||(x=new I),t=x),this._apiKey=e,this._scriptLoader=t}return e.prototype.getAutocompleteService=function(){return this._autocompletePromise||(this._autocompletePromise=this._scriptLoader.loadMapsSdk(this._apiKey).then((function(e){if(!e.places.AutocompleteService)throw new Error("`AutocompleteService` is undefined");return new e.places.AutocompleteService}))),this._autocompletePromise},e.prototype.getPlacesServices=function(){var e=document.createElement("div");return this._placesPromise||(this._placesPromise=this._scriptLoader.loadMapsSdk(this._apiKey).then((function(t){if(!t.places.PlacesService)throw new Error("`PlacesService` is undefined");return new t.places.PlacesService(e)}))),this._placesPromise},e}();const T=function(e){function t(t){var n=e.call(this,t)||this;return n.onSelect=function(e){var t=n.props,a=t.fields,o=t.onSelect,l=void 0===o?r.noop:o,i=t.nextElement;n.googleAutocompleteService.getPlacesServices().then((function(t){t.getDetails({placeId:e.id,fields:a||["address_components","name"]},(function(t){i&&i.focus(),l(t,e)}))}))},n.onChange=function(e){var t=n.props,a=t.isAutocompleteEnabled,o=t.onChange;if((void 0===o?r.noop:o)(e,!1),!a)return n.resetAutocomplete();n.setAutocomplete(e),n.setItems(e)},n.googleAutocompleteService=new A(t.apiKey),n.state={items:[],autoComplete:"off"},n}return(0,a.ZT)(t,e),t.prototype.render=function(){var e=this.props,t=e.initialValue,n=e.onToggleOpen,o=void 0===n?r.noop:n,i=e.inputProps,s=void 0===i?{}:i,c=this.state,d=c.autoComplete,u=c.items;return l.createElement(F,{initialHighlightedIndex:0,initialValue:t,inputProps:(0,a.pi)((0,a.pi)({},s),{autoComplete:d}),items:u,listTestId:"address-autocomplete-suggestions",onChange:this.onChange,onSelect:this.onSelect,onToggleOpen:o},l.createElement("div",{className:"co-googleAutocomplete-footer"}))},t.prototype.setItems=function(e){var t=this;if(e){var n=this.props,a=n.componentRestrictions,o=n.types;this.googleAutocompleteService.getAutocompleteService().then((function(n){n.getPlacePredictions({input:e,types:o||["geocode"],componentRestrictions:a},(function(e){return t.setState({items:t.toAutocompleteItems(e)})}))}))}else this.setState({items:[]})},t.prototype.resetAutocomplete=function(){this.setState({items:[],autoComplete:"off"})},t.prototype.setAutocomplete=function(e){this.setState((0,a.pi)((0,a.pi)({},this.state),{autoComplete:e&&e.length?"nope":"off"}))},t.prototype.toAutocompleteItems=function(e){return(e||[]).map((function(e){return{label:e.description,value:e.structured_formatting.main_text,highlightedSlices:e.matched_substrings,id:e.place_id}}))},t}(l.PureComponent);const O=(0,l.memo)((function(e){var t=e.field,n=t.default,a=t.name,o=e.countryCode,r=e.supportedCountries,s=e.parentFieldName,c=e.nextElement,d=e.apiKey,u=e.onSelect,m=e.onChange,p=e.onToggleOpen,g=e.useFloatingLabel,v=e.disabledFields,C=s?"".concat(s,".").concat(a):a,b=(0,l.useMemo)((function(){return l.createElement(i.Z,{id:"address.address_line_1_label"})}),[]),y=function(e){return"".concat(h(e),"Label")}(a),k=(0,l.useMemo)((function(){return{className:E()("form-input optimizedCheckout-form-input",{"floating-input":g}),id:f(a),"aria-labelledby":y,placeholder:g?" ":n,labelText:g?b:null}}),[a,y,n,b]),S=(0,l.useCallback)((function(e){var t=e.field;return l.createElement(T,{apiKey:d,componentRestrictions:o?{country:o}:void 0,initialValue:t.value,inputProps:k,isAutocompleteEnabled:!!o&&r.indexOf(o)>-1,nextElement:c,onChange:m,onSelect:u,onToggleOpen:p})}),[d,o,k,c,m,u,p,r]),w=g?null:l.createElement(_.Z,{htmlFor:k.id,id:y,useFloatingLabel:g},b);return l.createElement("div",{className:E()("dynamic-form-field dynamic-form-field--addressLineAutocomplete",{"floating-form-field":g})},l.createElement(Z.Z,{disabledFields:v,input:S,label:w,name:C,useFloatingLabel:g}))}));var L={address1:"address.address_line_1_label",address2:"address.address_line_2_label",city:"address.city_label",company:"address.company_name_label",countryCode:"address.country_label",firstName:"address.first_name_label",lastName:"address.last_name_label",phone:"address.phone_number_label",postalCode:"address.postal_code_label",stateOrProvince:"address.state_label",stateOrProvinceCode:"address.state_label"},V={address1:"address-line1",address2:"address-line2",city:"address-level2",company:"organization",countryCode:"country",firstName:"given-name",lastName:"family-name",phone:"tel",postalCode:"postal-code",stateOrProvince:"address-level1",stateOrProvinceCode:"address-level1"},D={countryCode:"address.select_country_action",stateOrProvince:"address.select_state_action",stateOrProvinceCode:"address.select_state_action"},M="address1",R=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.containerRef=(0,l.createRef)(),t.handleDynamicFormFieldChange=(0,o.memoize)((function(e){return function(n){t.syncNonFormikValue(e,n)}})),t.handleAutocompleteChange=function(e,n){n||t.syncNonFormikValue(M,e)},t.handleAutocompleteSelect=function(e,n){var a=n.value,o=t.props,l=o.countries,i=o.setFieldValue,s=void 0===i?r.noop:i,c=o.onChange,d=void 0===c?r.noop:c,u=b(e,l);(0,r.forIn)(u,(function(e,t){s(t,e),d(t,e)})),a&&t.syncNonFormikValue(M,a)},t.syncNonFormikValue=function(e,n){var a=t.props,o=a.formFields,l=a.setFieldValue,i=void 0===l?r.noop:l,s=a.onChange,d=void 0===s?r.noop:s,u=o.filter((function(e){return e.custom&&e.fieldType===c.Z.date})).map((function(e){return e.name}));(e===M||u.indexOf(e)>-1)&&i(e,n),d(e,n)},t}return(0,a.ZT)(t,e),t.prototype.componentDidMount=function(){var e=this.containerRef.current;e&&(this.nextElement=e.querySelector('[autocomplete="address-line2"]'))},t.prototype.render=function(){var e=this,t=this.props,n=t.formFields,a=t.fieldName,o=t.countriesWithAutocomplete,r=t.countryCode,s=t.googleMapsApiKey,c=t.onAutocompleteToggle,p=t.shouldShowSaveAddress,g=t.useFloatingLabel,v=t.disabledFields;return l.createElement(l.Fragment,null,l.createElement(d.Z,null,l.createElement("div",{className:"checkout-address",ref:this.containerRef},n.map((function(t){var n=t.name,d=D[n];return"address1"===n&&s&&o?l.createElement(O,{apiKey:s,countryCode:r,disabledFields:v,field:t,key:t.id,nextElement:e.nextElement||void 0,onChange:e.handleAutocompleteChange,onSelect:e.handleAutocompleteSelect,onToggleOpen:c,parentFieldName:a,supportedCountries:o,useFloatingLabel:g}):l.createElement(u.Z,{autocomplete:V[t.name],disabledFields:v,extraClass:"dynamic-form-field--".concat(h(n)),field:t,inputId:f(n),key:"".concat(t.id,"-").concat(t.name),label:t.custom?t.label:l.createElement(i.Z,{id:L[t.name]}),onChange:e.handleDynamicFormFieldChange(n),parentFieldName:t.custom?a?"".concat(a,".customFields"):"customFields":a,placeholder:e.getPlaceholderValue(t,d),useFloatingLabel:g})})))),p&&l.createElement(m.Z,{labelContent:l.createElement(i.Z,{id:"address.save_in_addressbook"}),name:a?"".concat(a,".shouldSaveAddress"):"shouldSaveAddress"}))},t.prototype.getPlaceholderValue=function(e,t){var n=this.props.language;return e.default&&"dropdown"!==e.fieldType?e.default:t&&n.translate(t)},t}(l.Component);const z=(0,s.Z)(R)},24648:(e,t,n)=>{n.d(t,{Z:()=>h});var a=n(86940),o=n(67627),r=n(67106),l=n(70140),i=n(24994),s=n(88870),c=n(43276),d=n(36636);const u=(0,c.Z)((function(e){var t=e.selectedAddress,n=e.language,a=(0,o.useState)(!1),i=a[0],s=a[1];return o.createElement("a",{"aria-controls":"addressDropdown","aria-description":n.translate("address.enter_or_select_address_action"),"aria-expanded":i,className:"button dropdown-button dropdown-toggle--select",href:"#",id:"addressToggle",onClick:(0,r.Z)((function(){return s(!i)}))},t?o.createElement(d.Z,{address:t}):o.createElement(l.Z,{id:"address.enter_address_action"}))}));var m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleSelectAddress=function(e){var n=t.props,a=n.onSelectAddress,o=n.selectedAddress;(0,s.Z)(o,e)||a(e)},t.handleUseNewAddress=function(){var e=t.props,n=e.selectedAddress;(0,e.onUseNewAddress)(n)},t}return(0,a.ZT)(t,e),t.prototype.render=function(){var e=this.props,t=e.addresses,n=e.selectedAddress;return o.createElement("div",{className:"form-field"},o.createElement("div",{className:"dropdown--select"},o.createElement(i.Z,{dropdown:o.createElement(p,{addresses:t,onSelectAddress:this.handleSelectAddress,onUseNewAddress:this.handleUseNewAddress,selectedAddress:n})},o.createElement(u,{addresses:t,selectedAddress:n}))))},t}(o.PureComponent),p=function(e){var t=e.addresses,n=e.onSelectAddress,a=e.onUseNewAddress,i=e.selectedAddress;return o.createElement("ul",{className:"dropdown-menu instrumentSelect-dropdownMenu",id:"addressDropdown"},o.createElement("li",{className:"dropdown-menu-item dropdown-menu-item--select"},o.createElement("a",{"data-test":"add-new-address",href:"#",onClick:(0,r.Z)((function(){return a(i)}))},o.createElement(l.Z,{id:"address.enter_address_action"}))),t.map((function(e){return o.createElement("li",{className:"dropdown-menu-item dropdown-menu-item--select",key:e.id},o.createElement("a",{href:"#",onClick:(0,r.Z)((function(){return n(e)}))},o.createElement(d.Z,{address:e})))})))};const h=(0,o.memo)(m)},88870:(e,t,n)=>{n.d(t,{Z:()=>r});var a=n(86940),o=n(91074);function r(e,t){return!(!e||!t)&&((0,o.isEqual)(l(e),l(t))&&function(e,t){if(e.stateOrProvince&&e.stateOrProvince===t.stateOrProvince)return!0;if(e.stateOrProvinceCode&&e.stateOrProvinceCode===t.stateOrProvinceCode)return!0;return e.stateOrProvince===t.stateOrProvince&&e.stateOrProvinceCode===t.stateOrProvinceCode}(e,t))}function l(e){return(0,o.omit)((0,a.pi)((0,a.pi)({},e),{customFields:(e.customFields||[]).filter((function(e){return!!e.fieldValue}))}),["id","shouldSaveAddress","stateOrProvince","stateOrProvinceCode","type","email","country"])}},97204:(e,t,n)=>{n.d(t,{Z:()=>l});var a=n(91074),o=n(88870),r=n(33497);function l(e,t,n){return!(!e||!(0,r.Z)(e,n))&&(0,a.some)(t,(function(t){return(0,o.Z)(t,e)}))}},95593:(e,t,n)=>{n.d(t,{Z:()=>r});var a=n(86940),o=n(19945);function r(e){var t=e.customFields,n=(0,a._T)(e,["customFields"]),r=e.shouldSaveAddress;return(0,a.pi)((0,a.pi)({},n),{shouldSaveAddress:r,customFields:(0,o.Z)(t)})}},76741:(e,t,n)=>{function a(e){return!!e.features["CHECKOUT-6879.enable_floating_labels"]}n.d(t,{Z:()=>a})},19945:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(91074);function o(e){var t=[];return(0,a.forIn)(e,(function(e,n){var o;if((0,a.isDate)(e)){var r=(0,a.padStart)((e.getMonth()+1).toString(),2,"0"),l=(0,a.padStart)(e.getDate().toString(),2,"0");o="".concat(e.getFullYear(),"-").concat(r,"-").concat(l)}else o=e;t.push({fieldId:n,fieldValue:o})})),t}},67570:(e,t,n)=>{n.d(t,{Z:()=>u});var a=n(86940),o=n(67627),r=n(70140),l=n(64553),i=n(7936),s=n(98119),c=n(78379),d=n(92963);const u=function(){var e=(0,o.useCallback)((function(e){return o.createElement(l.Z,{hidden:!0,htmlFor:e},o.createElement(r.Z,{id:"shipping.order_comment_label"}))}),[]),t=(0,o.useCallback)((function(e){var t=e.field;return o.createElement(i.Z,(0,a.pi)({},t,{autoComplete:"off",maxLength:2e3}))}),[]),n=(0,o.useMemo)((function(){return o.createElement(s.Z,null,o.createElement(r.Z,{id:"shipping.order_comment_label"}))}),[]);return o.createElement(c.Z,{legend:n,testId:"checkout-shipping-comments"},o.createElement(d.Z,{input:t,label:e,name:"orderComment"}))}},41957:(e,t,n)=>{n.d(t,{Z:()=>r});var a=n(10631),o=n(56851);function r(e){return(e&&e.payments?e.payments:[]).find((function(e){return!(0,a.Z)(e)&&!(0,o.Z)(e)&&!!e.providerId}))}},74161:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(92304);function o(e){return(0,a.Z)(e.lineItems.physicalItems.filter((function(e){return!e.addedByPromotion})))}},24994:(e,t,n)=>{n.d(t,{Z:()=>l});var a=n(86940),o=n(67627),r=n(80850);const l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={shouldShow:!1},t.handleClick=function(e){t.state.shouldShow?t.handleClose(e.nativeEvent):t.handleOpen(e.nativeEvent)},t.handleOpen=function(){t.state.shouldShow||t.setState({shouldShow:!0},(function(){document.addEventListener("click",t.handleClose)}))},t.handleClose=function(){t.state.shouldShow&&t.setState({shouldShow:!1},(function(){document.removeEventListener("click",t.handleClose)}))},t}return(0,a.ZT)(t,e),t.prototype.componentWillUnmount=function(){document.removeEventListener("click",this.handleClose)},t.prototype.render=function(){var e=this,t=this.props,n=t.children,l=t.placement,i=t.dropdown,s=this.state.shouldShow;return o.createElement(r.Manager,null,o.createElement(r.Reference,null,(function(t){var a=t.ref;return o.createElement("div",{className:"dropdownTrigger",onClick:e.handleClick,ref:a},n)})),o.createElement(r.Popper,{modifiers:{hide:{enabled:!1},flip:{enabled:!1},preventOverflow:{enabled:!1}},placement:l},(function(e){var t=e.ref,n=e.style;return s?o.createElement("div",{className:"dropdownMenu",ref:t,style:(0,a.pi)((0,a.pi)({},n),{width:"100%",zIndex:1})},i):null})))},t.defaultProps={placement:"bottom-start"},t}(o.Component)},59826:(e,t,n)=>{n.d(t,{Z:()=>c});var a=n(86940),o=n(91074),r=n(67627),l=n(45793),i=n(25079),s=n(3354);const c=(0,r.memo)((function(e){var t=e.additionalClassName,n=e.disabled,c=void 0!==n&&n,d=e.labelContent,u=e.onChange,m=e.name,p=e.id,h=(0,r.useCallback)((function(e){var t=e.field;return r.createElement(r.Fragment,null,r.createElement(i.Z,(0,a.pi)({},t,{checked:!!t.value,disabled:c,id:p||t.name,label:d})),r.createElement(s.Z,{errorId:"".concat(null!=p?p:m,"-field-error-message"),name:m,testId:"".concat((0,o.kebabCase)(m),"-field-error-message")}))}),[c,p,d,m]);return r.createElement(l.Z,{additionalClassName:t,name:m,onChange:u,render:h})}))},25079:(e,t,n)=>{n.d(t,{Z:()=>c});var a=n(86940),o=n(696),r=n.n(o),l=n(67627),i=n(50004),s=n(64553);const c=(0,l.forwardRef)((function(e,t){var n=e.additionalClassName,o=e.label,c=e.id,d=(0,a._T)(e,["additionalClassName","label","id"]);return l.createElement(l.Fragment,null,l.createElement(i.Z,(0,a.pi)({},d,{className:r()("form-checkbox","optimizedCheckout-form-checkbox",n),id:c,ref:t,type:"checkbox"})),l.createElement(s.Z,{htmlFor:c},o))}))},70764:(e,t,n)=>{n.d(t,{Z:()=>I});var a=n(86940),o=n(696),r=n.n(o),l=n(91074),i=n(67627),s=n(70140),c=n(76417),d=n(47086),u=n(18037),m=n.n(u),p=n(71735),h=n(11547);const f=(0,p.Z)(h.Z,{displayNamePrefix:"withDate",pickProps:function(e,t){return"date"===t&&!!e}});var g=n(34984),v=n(25079),C=n(50004),b=n(64553);const y=(0,i.forwardRef)((function(e,t){var n=e.additionalClassName,o=e.label,l=e.value,s=e.checked,c=e.id,d=(0,a._T)(e,["additionalClassName","label","value","checked","id"]);return i.createElement(i.Fragment,null,i.createElement(C.Z,(0,a.pi)({},d,{checked:s,className:r()("form-radio","optimizedCheckout-form-radio",n),id:c,ref:t,type:"radio",value:l})),i.createElement(b.Z,{htmlFor:c},o))}));var E=n(10817),_=n(7936);const Z=(0,i.memo)(f((function(e){e.additionalClassName;var t=e.date,n=e.fieldType,o=e.id,s=e.name,c=e.onChange,u=void 0===c?l.noop:c,p=e.options,h=e.placeholder,f=e.useFloatingLabel,C=e.value,b=(0,a._T)(e,["additionalClassName","date","fieldType","id","name","onChange","options","placeholder","useFloatingLabel","value"]),Z=t.inputFormat,k=(0,i.useCallback)((function(e,t){return u((0,a.pi)((0,a.pi)({},t),{target:{name:s,value:e}}))}),[u,s]);switch(n){case d.Z.dropdown:return i.createElement(i.Fragment,null,i.createElement("div",{className:r()({"dropdown-chevron":!f},{"floating-select-chevron":f})},i.createElement(g.Z,null)),i.createElement("select",(0,a.pi)({},b,{className:r()({"floating-select":f},"form-select optimizedCheckout-form-select"),"data-test":"".concat(o,"-select"),id:o,name:s,onChange:u,value:null===C?"":C}),h&&i.createElement("option",{value:""},h),p&&p.map((function(e){var t=e.label,n=e.value;return i.createElement("option",{key:n,value:n},t)}))));case d.Z.radio:return p&&p.length?i.createElement(i.Fragment,null,p.map((function(e){var t=e.label,n=e.value;return i.createElement(y,(0,a.pi)({},b,{checked:n===C,id:"".concat(o,"-").concat(n),key:n,label:t,name:s,onChange:u,testId:"".concat(o,"-").concat(n,"-radio"),value:n}))}))):null;case d.Z.checkbox:return p&&p.length?i.createElement(i.Fragment,null,p.map((function(e){var t=e.label,n=e.value;return i.createElement(v.Z,(0,a.pi)({},b,{checked:!!Array.isArray(C)&&C.includes(n),id:"".concat(o,"-").concat(n),key:n,label:t,name:s,onChange:u,testId:"".concat(o,"-").concat(n,"-checkbox"),value:n}))}))):null;case d.Z.date:return i.createElement(m(),(0,a.pi)({},b,{autoComplete:"off",calendarClassName:"optimizedCheckout-contentPrimary",className:r()("form-input optimizedCheckout-form-input",{"floating-input":f}),dateFormat:Z,maxDate:b.max?new Date("".concat(b.max,"T00:00:00Z")):void 0,minDate:b.min?new Date("".concat(b.min,"T00:00:00Z")):void 0,name:s,onChange:k,placeholderText:Z.toUpperCase(),popperClassName:"optimizedCheckout-contentPrimary",selected:(0,l.isDate)(C)?C:void 0}));case d.Z.multiline:return i.createElement(E.Z,(0,a.pi)({},b,{id:o,name:s,onChange:u,testId:"".concat(o,"-text"),type:n,useFloatingLabel:f,value:C}));default:return i.createElement(_.Z,(0,a.pi)({},b,{id:o,name:s,onChange:u,placeholder:h,testId:"".concat(o,"-").concat(n===d.Z.password?"password":"text"),type:n,useFloatingLabel:f,value:C}))}})));var k=n(36662),S=n(3354);const w=(0,i.memo)((function(e){var t=e.testId,n=e.onSelectedAll,a=e.onSelectedNone,o=(0,i.useCallback)((function(e){e.preventDefault(),n()}),[n]),r=(0,i.useCallback)((function(e){e.preventDefault(),a()}),[a]);return i.createElement("ul",{className:"multiCheckbox--controls"},i.createElement("li",{className:"multiCheckbox--control"},i.createElement(s.Z,{id:"address.select"})),i.createElement("li",{className:"multiCheckbox--control"},i.createElement("a",{"data-test":"".concat(t,"Checkbox-all-button"),href:"#",onClick:o},i.createElement(s.Z,{id:"address.select_all"}))),i.createElement("li",{className:"multiCheckbox--control"},i.createElement("a",{"data-test":"".concat(t,"Checkbox-none-button"),href:"#",onClick:r},i.createElement(s.Z,{id:"address.select_none"}))))}));var P=function(e){var t=e.form,n=t.values,a=t.errors,o=e.id,r=e.label,s=e.name,u=e.onChange,m=void 0===u?l.noop:u,p=e.options,h=e.push,f=e.remove,g=(0,i.useCallback)((function(){var e=(0,c.getIn)(n,s)||[];(0,l.difference)(p.map((function(e){return e.value})),e).forEach((function(e){return h(e)})),m((0,c.getIn)(n,s))}),[s,m,p,h,n]),v=(0,i.useCallback)((function(){((0,c.getIn)(n,s)||[]).forEach((function(){return f(0)})),m((0,c.getIn)(n,s))}),[s,m,f,n]),C=(0,i.useCallback)((function(e){var t=(0,c.getIn)(n,s)||[],a=e.target,o=a.value;a.checked?h(o):f(t.indexOf(o)),m((0,c.getIn)(n,s))}),[s,m,h,f,n]);return i.createElement(k.Z,{hasError:(0,c.getIn)(a,s)&&(0,c.getIn)(a,s).length},r,p.length>1&&i.createElement(w,{onSelectedAll:g,onSelectedNone:v,testId:o}),i.createElement(Z,{fieldType:d.Z.checkbox,id:o,name:s,onChange:C,options:p,value:(0,c.getIn)(n,s)||[]}),i.createElement(S.Z,{errorId:"".concat(null!=o?o:s,"-field-error-message"),name:s,testId:"".concat((0,l.kebabCase)(s),"-field-error-message")}))};const F=(0,i.memo)((function(e){var t=e.id,n=e.label,o=e.name,r=e.onChange,s=e.options,d=(0,i.useCallback)((function(e){return i.createElement(P,(0,a.pi)({id:t,label:n,name:o,onChange:r,options:s},(0,l.pick)(e,["form","pop","push","remove"])))}),[t,n,o,r,s]);return i.createElement(c.FieldArray,{name:o,render:d})}));var N=n(92963);const I=(0,i.memo)((function(e){var t=e.field,n=t.fieldType,o=t.type,c=t.secret,u=t.name,m=t.label,p=t.required,h=t.options,f=t.max,g=t.min,v=t.maxLength,C=e.parentFieldName,y=e.onChange,E=e.placeholder,_=e.inputId,k=e.autocomplete,S=e.label,w=e.extraClass,P=e.useFloatingLabel,I=e.disabledFields,x=_||u,A=C?"".concat(C,".").concat(u):u,T=Boolean(P&&((0,l.includes)(["text","password","dropdown","date","multiline"],n)||!n)),O=(0,i.useMemo)((function(){return i.createElement(b.Z,{htmlFor:x,id:"".concat(x,"-label"),useFloatingLabel:T},S||m,!p&&i.createElement(i.Fragment,null," ",i.createElement("small",{className:"optimizedCheckout-contentSecondary"},i.createElement(s.Z,{id:"common.optional_text"}))))}),[x,m,p,T,S]),L=(0,i.useMemo)((function(){return"text"===n?"integer"===o?d.Z.number:(0,l.includes)(u,"phone")||(0,l.includes)(u,"tel")?d.Z.telephone:c?d.Z.password:d.Z.text:n}),[n,o,c,u]),V=(0,i.useCallback)((function(e){var t=e.disabledFields,n=e.field;return i.createElement(Z,(0,a.pi)({},n,{"aria-labelledby":"".concat(x,"-label ").concat(x,"-field-error-message"),autoComplete:k,disabled:t,fieldType:L,id:x,max:f,maxLength:v||void 0,min:g,options:h&&h.items,placeholder:E||h&&h.helperLabel,rows:h&&h.rows,useFloatingLabel:T}))}),[x,f,v,g,h,E,L,k]);return i.createElement("div",{className:r()("dynamic-form-field",{"floating-form-field":T},w)},n===d.Z.checkbox?i.createElement(F,{id:x,label:O,name:A,onChange:y,options:h&&h.items||[]}):i.createElement(N.Z,{disabledFields:I,id:x,input:V,label:O,name:A,onChange:y,useFloatingLabel:T}))}))},10817:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(86940),o=n(696),r=n.n(o),l=n(67627);const i=(0,l.forwardRef)((function(e,t){var n=e.additionalClassName,o=e.testId,i=e.className,s=e.useFloatingLabel,c=(0,a._T)(e,["additionalClassName","testId","className","useFloatingLabel"]);return l.createElement("textarea",(0,a.pi)({},c,{className:i||r()({"floating-textarea":s},"form-input","optimizedCheckout-form-input",n),"data-test":o,ref:t}))}))},34984:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(67627);const o=(0,n(25426).Z)((function(){return a.createElement("svg",{height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"}))}))}}]);
//# sourceMappingURL=361-f005ca39.js.map